ğŸš€ Shell Scripting & Linux Production Cheat Sheet

A Senior DevOps Engineerâ€™s Daily Commands & Scenarios

ğŸ“Œ 1. VIM EDITOR â€“ REAL PRODUCTION SCENARIOS
ğŸ” Replace text (safe & fast)

Replace ro â†’ to in entire file

:%s/ro/to/g


Replace with confirmation

:%s/ro/to/gc


Replace in line range (10â€“50)

:10,50s/ro/to/g


Replace exact word only

:%s/\<ro\>/to/g

ğŸ§¹ Delete lines in Vim

Delete current line

dd


Delete 10 lines

10dd


Delete line range

:20,40d


Delete all lines

:%d

ğŸ” Filter / Search in Vim

Search word

/error


Search case-insensitive

/error\c


Show line numbers

:set number

ğŸ“Œ 2. LINUX FILE & LOG FILTERING (VERY COMMON)
ğŸ” Filter logs

Find ERROR lines

grep ERROR app.log


Case-insensitive

grep -i error app.log


Count occurrences

grep ERROR app.log | wc -l

ğŸ”„ Real-time log monitoring
tail -f app.log


Last 100 lines:

tail -n 100 app.log

ğŸ“Œ 3. DELETE LINES FROM FILE (LINUX)
ğŸ§¹ Delete specific lines (sed)

Delete lines 10â€“20

sed -i '10,20d' app.log


Delete matching pattern

sed -i '/DEBUG/d' app.log

ğŸ” SAFE MODE (production)
sed '10,20d' app.log > new.log && mv new.log app.log

ğŸ“Œ 4. CLEAR LOG FILE (WITHOUT DELETING FILE)

âš ï¸ Production-safe

> app.log


or

truncate -s 0 app.log


âœ” App continues running
âœ” Permissions intact

ğŸ“Œ 5. LOG ROTATION (MUST FOR PROD)
Create config
sudo vi /etc/logrotate.d/myapp

/var/log/myapp/*.log {
    daily
    rotate 7
    compress
    missingok
    notifempty
    copytruncate
}


Test:

logrotate -d /etc/logrotate.d/myapp

ğŸ“Œ 6. DISK FULL TROUBLESHOOTING (AWS / PROD)
Check disk
df -h

Find large folders
du -sh /var/* | sort -h

Find large files
find / -type f -size +1G 2>/dev/null

Emergency cleanup
truncate -s 0 /var/log/app.log

ğŸ“Œ 7. BACKUP BEFORE DELETE (BEST PRACTICE)
cp app.log app.log.bkp


Or compressed backup:

tar -czf logs_backup.tar.gz /var/log/myapp

ğŸ“Œ 8. AUTO CLEAN LOGS (SHELL SCRIPT)
ğŸ§¾ log_cleanup.sh
#!/bin/bash

LOG_DIR="/var/log/myapp"
DAYS=7

find $LOG_DIR -name "*.log" -mtime +$DAYS -exec rm -f {} \;

echo "Logs cleaned on $(date)"


Cron job:

0 2 * * * /path/log_cleanup.sh

ğŸ“Œ 9. COMMON AWK COMMANDS (INTERVIEW ğŸ”¥)

Print column

awk '{print $2}' file


Print line number + content

awk '{print NR,$0}' file


Filter ERROR

awk '/ERROR/' app.log

ğŸ“Œ 10. COMMON SED COMMANDS

Replace text

sed 's/old/new/g' file


Delete empty lines

sed '/^$/d' file

ğŸ“Œ 11. PROD SAFETY RULES (VERY IMPORTANT)

âœ… Always take backup
âœ… Prefer preview before delete
âœ… Use logrotate not manual cleanup
âœ… Use truncate, not rm, for live logs

ğŸ“Œ 12. INTERVIEW ONE-LINERS (SAVE THESE)

â€œI use logrotate for prevention, sed/awk for cleanup, and cron for automation.â€

â€œIn production, I truncate logs instead of deleting files to avoid service disruption.â€

â€œFor mass edits, I prefer Vimâ€™s :%s with confirmation.â€

ğŸ“Œ 13. QUICK REVISION TABLE
Task	Command
Replace text	:%s/old/new/g
Delete lines	sed '10,20d'
Clear log	truncate -s 0
Filter log	grep ERROR
Live logs	tail -f
Disk check	df -h
